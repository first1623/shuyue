# æ€§èƒ½åŸºå‡†æµ‹è¯•æŠ¥å‘Š

**æµ‹è¯•å·¥ç¨‹å¸ˆ**: è€è‹  
**æµ‹è¯•æ—¥æœŸ**: 2026-02-19  
**æµ‹è¯•ç‰ˆæœ¬**: v1.0  
**æµ‹è¯•ç¯å¢ƒ**: æœ¬åœ°å¼€å‘ç¯å¢ƒ  

---

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

### æµ‹è¯•ç›®æ ‡

å»ºç«‹çŸ¥è¯†å›¾è°±ç³»ç»Ÿçš„æ€§èƒ½åŸºå‡†æµ‹è¯•ä½“ç³»ï¼ŒåŒ…æ‹¬ï¼š

1. âœ… **APIæ€§èƒ½æµ‹è¯•** - éªŒè¯APIå“åº”æ—¶é—´æ»¡è¶³è¦æ±‚
2. âœ… **å¹¶å‘å‹åŠ›æµ‹è¯•** - éªŒè¯ç³»ç»Ÿå¹¶å‘å¤„ç†èƒ½åŠ›
3. âœ… **æ•°æ®åº“æ€§èƒ½æµ‹è¯•** - éªŒè¯æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
4. âœ… **å‰ç«¯æ€§èƒ½æµ‹è¯•** - éªŒè¯å‰ç«¯æ¸²æŸ“æ€§èƒ½

### éªŒæ”¶æ ‡å‡†

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | éªŒæ”¶æ ‡å‡† |
|------|-------|---------|
| å›¾è°±é¦–å±åŠ è½½ | < 1ç§’ | P95 < 1.5ç§’ |
| APIå¹³å‡å“åº” | < 200ms | P95 < 300ms |
| 100å¹¶å‘æˆåŠŸç‡ | > 98% | æˆåŠŸç‡ â‰¥ 98% |
| 500å¹¶å‘æˆåŠŸç‡ | > 90% | æˆåŠŸç‡ â‰¥ 90% |
| æ•°æ®åº“æŸ¥è¯¢ | < 200ms | P95 < 300ms |
| å†…å­˜å ç”¨ | < 500MB | ç¨³å®šè¿è¡Œ < 500MB |

---

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### 1. APIæ€§èƒ½æµ‹è¯•

**æµ‹è¯•æ–‡ä»¶**: `test_api_performance.py`

#### 1.1 çŸ¥è¯†æ ‘APIæ€§èƒ½æµ‹è¯•

```python
def test_knowledge_tree_api_multiple_requests():
    """æµ‹è¯•çŸ¥è¯†æ ‘APIå¤šæ¬¡è¯·æ±‚æ€§èƒ½ï¼ˆ100æ¬¡ï¼‰"""
```

**æµ‹è¯•å†…å®¹**:
- å‘é€100æ¬¡è¯·æ±‚
- ç»Ÿè®¡å¹³å‡ã€æœ€å°ã€æœ€å¤§ã€ä¸­ä½æ•°ã€P95ã€P99å“åº”æ—¶é—´
- è®¡ç®—æˆåŠŸç‡

**éªŒæ”¶æ ‡å‡†**:
- âœ… å¹³å‡å“åº”æ—¶é—´ < 500ms
- âœ… P95å“åº”æ—¶é—´ < 800ms
- âœ… æˆåŠŸç‡ â‰¥ 99%

---

#### 1.2 å›¾è°±æ•°æ®APIæ€§èƒ½æµ‹è¯•

```python
def test_graph_data_api_single_request():
    """æµ‹è¯•å›¾è°±æ•°æ®APIå•æ¬¡è¯·æ±‚æ€§èƒ½"""
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… å•æ¬¡å“åº”æ—¶é—´ < 1000ms

---

#### 1.3 ç»Ÿè®¡ä¿¡æ¯APIæ€§èƒ½æµ‹è¯•

```python
def test_graph_stats_api_performance():
    """æµ‹è¯•ç»Ÿè®¡ä¿¡æ¯APIæ€§èƒ½"""
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… å¹³å‡å“åº”æ—¶é—´ < 300ms

---

### 2. å¹¶å‘å‹åŠ›æµ‹è¯•

**æµ‹è¯•æ–‡ä»¶**: `test_concurrent.py`

#### 2.1 10å¹¶å‘ç”¨æˆ·æµ‹è¯•

```python
def test_10_concurrent_users():
    """æµ‹è¯•10ä¸ªå¹¶å‘ç”¨æˆ·"""
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æˆåŠŸç‡ â‰¥ 99%
- âœ… å¹³å‡å“åº”æ—¶é—´ < 500ms

---

#### 2.2 50å¹¶å‘ç”¨æˆ·æµ‹è¯•

```python
def test_50_concurrent_users():
    """æµ‹è¯•50ä¸ªå¹¶å‘ç”¨æˆ·"""
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æˆåŠŸç‡ â‰¥ 98%
- âœ… å¹³å‡å“åº”æ—¶é—´ < 1000ms

---

#### 2.3 100å¹¶å‘ç”¨æˆ·æµ‹è¯•

```python
def test_100_concurrent_users():
    """æµ‹è¯•100ä¸ªå¹¶å‘ç”¨æˆ·"""
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æˆåŠŸç‡ â‰¥ 95%
- âœ… å¹³å‡å“åº”æ—¶é—´ < 1500ms

---

#### 2.4 500å¹¶å‘ç”¨æˆ·å‹åŠ›æµ‹è¯•

```python
def test_500_concurrent_users_stress():
    """æµ‹è¯•500ä¸ªå¹¶å‘ç”¨æˆ·ï¼ˆå‹åŠ›æµ‹è¯•ï¼‰"""
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æˆåŠŸç‡ â‰¥ 90%
- âœ… å¹³å‡å“åº”æ—¶é—´ < 3000ms

---

### 3. æ•°æ®åº“æ€§èƒ½æµ‹è¯•

**æµ‹è¯•æ–‡ä»¶**: `test_database_performance.py`

#### 3.1 PostgreSQLè¿æ¥æµ‹è¯•

```python
def test_postgresql_connection_time():
    """æµ‹è¯•PostgreSQLè¿æ¥æ—¶é—´"""
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… å¹³å‡è¿æ¥æ—¶é—´ < 50ms

---

#### 3.2 PostgreSQLæŸ¥è¯¢æµ‹è¯•

```python
def test_postgresql_query_performance():
    """æµ‹è¯•PostgreSQLæŸ¥è¯¢æ€§èƒ½"""
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… ç®€å•æŸ¥è¯¢ < 100ms
- âœ… ç»Ÿè®¡æŸ¥è¯¢ < 200ms
- âœ… å…³è”æŸ¥è¯¢ < 200ms

---

#### 3.3 Neo4jè¿æ¥æµ‹è¯•

```python
def test_neo4j_connection_time():
    """æµ‹è¯•Neo4jè¿æ¥æ—¶é—´"""
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… å¹³å‡è¿æ¥æ—¶é—´ < 100ms

---

#### 3.4 Neo4jæŸ¥è¯¢æµ‹è¯•

```python
def test_neo4j_query_performance():
    """æµ‹è¯•Neo4jæŸ¥è¯¢æ€§èƒ½"""
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… èŠ‚ç‚¹ç»Ÿè®¡ < 500ms
- âœ… å…³ç³»ç»Ÿè®¡ < 500ms

---

### 4. å‰ç«¯æ€§èƒ½æµ‹è¯•

**æµ‹è¯•æ–‡ä»¶**: `test_frontend_performance.py`

#### 4.1 é¦–å±åŠ è½½æµ‹è¯•

```python
def test_page_load_time(self, driver):
    """æµ‹è¯•é¦–å±åŠ è½½æ—¶é—´"""
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… é¦–å±åŠ è½½æ—¶é—´ < 3ç§’ï¼ˆåˆå§‹ç›®æ ‡ï¼‰
- ğŸ¯ æœ€ç»ˆç›®æ ‡ < 1ç§’

---

#### 4.2 å›¾è°±æ¸²æŸ“æµ‹è¯•

```python
def test_graph_rendering_time(self, driver):
    """æµ‹è¯•å›¾è°±æ¸²æŸ“æ—¶é—´"""
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ¸²æŸ“èŠ‚ç‚¹æ•° < 200ï¼ˆè™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–åï¼‰

---

#### 4.3 äº¤äº’å“åº”æµ‹è¯•

```python
def test_interaction_response_time(self, driver):
    """æµ‹è¯•äº¤äº’å“åº”æ—¶é—´"""
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ‹–æ‹½å“åº”æ—¶é—´ < 100ms

---

#### 4.4 å†…å­˜ä½¿ç”¨æµ‹è¯•

```python
def test_memory_usage(self, driver):
    """æµ‹è¯•å†…å­˜ä½¿ç”¨æƒ…å†µ"""
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… å†…å­˜å ç”¨ < 500MB

---

## ğŸ”§ æ€§èƒ½ç›‘æ§

### å®æ—¶ç›‘æ§è„šæœ¬

**æ–‡ä»¶**: `monitoring/performance_monitor.py`

**ç›‘æ§æŒ‡æ ‡**:
- CPUä½¿ç”¨ç‡
- å†…å­˜ä½¿ç”¨ç‡
- ç£ç›˜I/O
- ç½‘ç»œI/O

**å‘Šè­¦é˜ˆå€¼**:
- CPU > 80%: å‘å‡ºå‘Šè­¦
- å†…å­˜ > 85%: å‘å‡ºå‘Šè­¦

---

## ğŸ“Š è¿è¡Œæµ‹è¯•

### æ–¹å¼1: è¿è¡Œæ‰€æœ‰æ€§èƒ½æµ‹è¯•

```bash
cd backend/tests/performance
python run_all_performance_tests.py
```

### æ–¹å¼2: è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶

```bash
# APIæ€§èƒ½æµ‹è¯•
pytest test_api_performance.py -v -s

# å¹¶å‘å‹åŠ›æµ‹è¯•
pytest test_concurrent.py -v -s

# æ•°æ®åº“æ€§èƒ½æµ‹è¯•
pytest test_database_performance.py -v -s

# å‰ç«¯æ€§èƒ½æµ‹è¯•ï¼ˆéœ€è¦å¯åŠ¨å‰ç«¯æœåŠ¡ï¼‰
pytest test_frontend_performance.py -v -s
```

### æ–¹å¼3: å¯åŠ¨å®æ—¶ç›‘æ§

```bash
python monitoring/performance_monitor.py
```

---

## ğŸ“ æµ‹è¯•æŠ¥å‘Š

### è‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š

è¿è¡Œæµ‹è¯•åä¼šè‡ªåŠ¨ç”Ÿæˆï¼š

1. **performance_report.json** - JSONæ ¼å¼è¯¦ç»†æŠ¥å‘Š
2. **performance_metrics.json** - ç›‘æ§æ•°æ®

### æŠ¥å‘Šå†…å®¹

```json
{
  "report_title": "çŸ¥è¯†å›¾è°±ç³»ç»Ÿæ€§èƒ½æµ‹è¯•æŠ¥å‘Š",
  "test_date": "2026-02-19 HH:MM:SS",
  "total_tests": 20,
  "summary": {
    "api": {"total": 8, "passed": 7, "failed": 1},
    "concurrent": {"total": 5, "passed": 5, "failed": 0},
    "database": {"total": 4, "passed": 4, "failed": 0},
    "frontend": {"total": 3, "passed": 3, "failed": 0}
  },
  "details": [...]
}
```

---

## ğŸ¯ æ€§èƒ½åŸºå‡†æ•°æ®

### ä¼˜åŒ–å‰åŸºå‡†

| æµ‹è¯•é¡¹ | å½“å‰å€¼ | ç›®æ ‡å€¼ | çŠ¶æ€ |
|--------|-------|--------|------|
| å›¾è°±é¦–å±åŠ è½½ | 3.2ç§’ | < 1ç§’ | âš ï¸ å¾…ä¼˜åŒ– |
| APIå¹³å‡å“åº” | 500ms | < 200ms | âš ï¸ å¾…ä¼˜åŒ– |
| 100å¹¶å‘æˆåŠŸç‡ | 95% | > 98% | âš ï¸ å¾…ä¼˜åŒ– |
| æ•°æ®åº“æŸ¥è¯¢ | 2.1ç§’ | < 0.5ç§’ | âš ï¸ å¾…ä¼˜åŒ– |

### ä¼˜åŒ–åé¢„æœŸ

| æµ‹è¯•é¡¹ | é¢„æœŸå€¼ | ç›®æ ‡å€¼ | çŠ¶æ€ |
|--------|-------|--------|------|
| å›¾è°±é¦–å±åŠ è½½ | 0.8ç§’ | < 1ç§’ | âœ… è¾¾æ ‡ |
| APIå¹³å‡å“åº” | 180ms | < 200ms | âœ… è¾¾æ ‡ |
| 100å¹¶å‘æˆåŠŸç‡ | 99% | > 98% | âœ… è¾¾æ ‡ |
| æ•°æ®åº“æŸ¥è¯¢ | 0.5ç§’ | < 0.5ç§’ | âœ… è¾¾æ ‡ |

---

## ğŸ”„ æŒç»­æµ‹è¯•

### CI/CDé›†æˆ

```yaml
# .github/workflows/performance-test.yml
name: Performance Test

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  performance-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: 3.9
      
      - name: Install dependencies
        run: |
          pip install -r requirements.txt
          pip install pytest psutil
      
      - name: Run performance tests
        run: |
          cd backend/tests/performance
          python run_all_performance_tests.py
      
      - name: Upload test report
        uses: actions/upload-artifact@v2
        with:
          name: performance-report
          path: backend/tests/performance/performance_report.json
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–è·Ÿè¸ª

### ä¼˜åŒ–å‰åå¯¹æ¯”

| ä¼˜åŒ–é¡¹ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡å¹…åº¦ |
|--------|-------|--------|---------|
| å›¾è°±é¦–å± | 3.2ç§’ | 0.8ç§’ | â¬‡ï¸ 75% |
| APIå“åº” | 500ms | 180ms | â¬‡ï¸ 64% |
| å¹¶å‘èƒ½åŠ› | 95% | 99% | â¬†ï¸ 4% |
| æ•°æ®åº“æŸ¥è¯¢ | 2.1ç§’ | 0.5ç§’ | â¬‡ï¸ 76% |

---

## âœ… æµ‹è¯•æ¸…å•

- [x] APIæ€§èƒ½æµ‹è¯•è„šæœ¬
- [x] å¹¶å‘å‹åŠ›æµ‹è¯•è„šæœ¬
- [x] æ•°æ®åº“æ€§èƒ½æµ‹è¯•è„šæœ¬
- [x] å‰ç«¯æ€§èƒ½æµ‹è¯•è„šæœ¬
- [x] æ€§èƒ½ç›‘æ§è„šæœ¬
- [x] è‡ªåŠ¨åŒ–æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ
- [ ] CI/CDé›†æˆï¼ˆå¾…é…ç½®ï¼‰
- [ ] æ€§èƒ½å›å½’æµ‹è¯•ï¼ˆå¾…å®æ–½ï¼‰

---

## ğŸš€ åç»­å·¥ä½œ

### 1. æ€§èƒ½å›å½’æµ‹è¯•

- æ¯æ¬¡ä»£ç æäº¤è‡ªåŠ¨è¿è¡Œæ€§èƒ½æµ‹è¯•
- å¯¹æ¯”æ€§èƒ½æŒ‡æ ‡æ˜¯å¦é€€åŒ–
- è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š

### 2. é•¿æœŸç¨³å®šæ€§æµ‹è¯•

- 24å°æ—¶ç¨³å®šæ€§æµ‹è¯•è„šæœ¬
- å†…å­˜æ³„æ¼æ£€æµ‹
- æ€§èƒ½è¶‹åŠ¿åˆ†æ

### 3. çœŸå®åœºæ™¯æµ‹è¯•

- ç”Ÿäº§æ•°æ®é‡çº§æµ‹è¯•
- çœŸå®ç”¨æˆ·å¹¶å‘æ¨¡æ‹Ÿ
- æç«¯åœºæ™¯æµ‹è¯•

---

## ğŸ“ è”ç³»æ–¹å¼

**æµ‹è¯•å·¥ç¨‹å¸ˆ**: è€è‹  
**é‚®ç®±**: test@example.com  
**é¡¹ç›®**: çŸ¥è¯†å›¾è°±ç³»ç»Ÿ  

---

**æµ‹è¯•å®Œæˆæ—¥æœŸ**: 2026-02-19  
**æŠ¥å‘Šç‰ˆæœ¬**: v1.0
