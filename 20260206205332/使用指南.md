# 📱 小红书多智能体内容生成系统 - 使用指南

---

## 🎯 系统简介

这是一个基于AI多智能体协作的小红书自动化内容生成与发布系统。

**核心特点：**
- 5个专业智能体协同工作
- 支持国内免费AI服务（DeepSeek等）
- 自动生成小红书风格文案
- AI生成配图（可选）
- 智能内容审核
- 一键发布到小红书

---

## 🚀 快速开始（3步）

### 步骤1：启动系统

```bash
python launcher.py
```

或手动启动：

```bash
# 检查环境
python setup_check.py

# 测试API
python test_connection.py

# 启动
python main.py
```

### 步骤2：选择功能

启动后看到主菜单：

```
═════════════════════════════════════════════════════════════
                        主菜单
═════════════════════════════════════════════════════════════

  1. 快速发布 - 输入主题直接发布
  2. 生成预览 - 生成内容后确认
  3. 批量发布 - 批量处理多个主题
  4. 查看记录 - 查看历史发布记录
  5. 系统配置 - 查看和修改配置
  6. 退出程序

═════════════════════════════════════════════════════════════
```

### 步骤3：输入主题并开始

选择"1"或"2"，然后输入主题，例如：

```
请输入发布主题: 夏季护肤小技巧
```

系统会自动：
1. 分析主题
2. 生成文案
3. 生成配图
4. 审核内容
5. 发布到小红书

---

## 📖 功能详解

### 1. 快速发布模式

**适用场景：** 熟悉主题，信任AI生成结果

**流程：**
```
输入主题
  ↓
AI自动生成内容
  ↓
自动发布
  ↓
完成
```

**优点：** 快速高效

**缺点：** 无人工确认

---

### 2. 生成预览模式（推荐新手）

**适用场景：** 首次使用，需要查看和修改

**流程：**
```
输入主题
  ↓
AI生成内容
  ↓
预览内容
  ↓
选择操作：
  1. 确认发布
  2. 修改文案
  3. 重新生成图片
  4. 放弃
  ↓
发布或调整
```

**优点：** 可控性强，可修改

---

### 3. 批量发布模式

**适用场景：** 有多个主题需要处理

**使用方法：**
```
选择"3. 批量发布"

请输入主题（多个主题用逗号分隔）:
夏季护肤, 秋季穿搭, 健身减肥, 家居收纳
```

系统会依次处理每个主题。

---

### 4. 查看记录

查看历史发布记录，包括：
- 发布时间
- 主题
- 笔记ID
- 发布状态

---

### 5. 系统配置

查看当前系统配置：
- AI服务商
- 模型信息
- API状态

---

## 🤖 智能体工作流程

### 策划智能体
```
输入主题
  ↓
分析目标人群
  ↓
确定内容角度
  ↓
生成关键词和话题标签
  ↓
输出内容策略
```

### 文案智能体
```
接收策略
  ↓
生成吸引人的标题
  ↓
撰写3点式正文
  ↓
添加emoji
  ↓
添加话题标签
  ↓
输出完整文案
```

### 图片智能体
```
接收文案和策略
  ↓
生成AI绘画提示词
  ↓
调用AI绘图服务
  ↓
生成高质量配图
  ↓
优化适配小红书
```

### 审核智能体
```
检查敏感词
  ↓
检查内容质量
  ↓
AI深度审核
  ↓
输出审核结果
```

### 发布智能体
```
上传图片
  ↓
创建笔记
  ↓
发布到小红书
  ↓
保存记录
```

---

## 💡 使用技巧

### 1. 主题选择技巧

**好的主题示例：**
- "夏季护肤小技巧"（具体、实用）
- "新手必看的5个拍照技巧"（数字引导）
- "这样搭配衣服太好看了"（情感共鸣）
- "月薪3000也能拥有的精致生活"（目标人群明确）

**避免的主题：**
- 过于泛泛（如"生活"）
- 涉及敏感内容
- 违反平台规则

### 2. 文案修改技巧

如果对生成的文案不满意：

```
1. 选择"修改文案"
2. 选择"让AI重新生成"
3. 输入修改建议，如：
   - "更活泼一点"
   - "增加实用性"
   - "用第一人称"
```

### 3. 图片生成技巧

图片提示词建议：
```
- 小红书风格
- 清新简约
- 明亮色彩
- 高质量
- 4K分辨率
```

---

## 🔧 配置调整

### 切换AI服务商

编辑 `.env` 文件：

```env
# 修改AI提供商
AI_PROVIDER=qwen  # 或 moonshot, zhipu, openai

# 配置对应的API Key
QWEN_API_KEY=your_api_key
```

### 调整重试次数

```env
MAX_RETRY_TIMES=5
```

### 调整发布延迟

```env
PUBLISH_DELAY=10  # 秒
```

---

## ❓ 常见问题

### Q1: API连接失败怎么办？

**A:**
1. 检查 `.env` 文件是否存在
2. 确认API Key正确
3. 检查网络连接
4. 尝试运行 `python test_connection.py`

### Q2: 文案质量不满意？

**A:**
1. 使用"生成预览"模式
2. 选择"修改文案"
3. 让AI根据反馈重新生成
4. 或手动编辑文案

### Q3: 图片生成失败？

**A:**
- 这是可选功能
- 未安装Stable Diffusion时系统只会生成文案
- 不影响核心功能使用

### Q4: 真实发布到小红书？

**A:**
需要配置小红书API：
1. 访问 https://open.xiaohongshu.com/
2. 申请开发者账号
3. 获取Access Token
4. 配置到 `.env` 文件

**注意：** 未配置时使用模拟模式，不会真实发布。

### Q5: DeepSeek免费额度用完了？

**A:**
- 继续使用付费服务（¥1/100万 Tokens）
- 或切换到其他免费服务商

---

## 📊 费用说明

### DeepSeek（当前使用）
- 新用户免费：500万Tokens
- 超出后：¥1/100万 Tokens
- **相当于每次生成成本 < ¥0.01**

### 其他服务商
详见 [API_SETUP_GUIDE.md](API_SETUP_GUIDE.md)

---

## 🎓 进阶使用

### 自定义敏感词

编辑 `config.py`：

```python
SENSITIVE_WORDS = [
    "违法", "暴力", "色情", "赌博", "毒品",
    # 添加自定义敏感词
]
```

### 修改默认策略

编辑智能体文件中的 `_get_default_strategy` 方法。

### 添加新AI服务商

1. 在 `config.py` 添加配置
2. 在 `ai_client.py` 添加初始化逻辑
3. 修改 `.env.example`

---

## 📝 日志查看

日志保存在 `logs/` 目录：
```
logs/
└── 20260206.log  # 今天的日志
```

查看日志了解系统运行状态和错误信息。

---

## 🎉 开始使用

现在就启动系统：

```bash
python launcher.py
```

输入你的第一个主题，让AI帮你生成小红书内容！

---

## 📞 技术支持

- 查看日志文件：`logs/日期.log`
- 阅读文档：
  - [API配置指南](API_SETUP_GUIDE.md)
  - [项目状态](PROJECT_STATUS.md)
  - [快速开始](QUICKSTART.md)

**祝使用愉快！** ✨
